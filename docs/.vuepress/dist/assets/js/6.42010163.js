(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{352:function(a,e,t){"use strict";t.r(e);var r=t(42),n=Object(r.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"å¼€å¯docker-buildx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å¯docker-buildx"}},[a._v("#")]),a._v(" å¼€å¯docker buildx")]),a._v(" "),t("p",[a._v("åœ¨/root/.dockerç›®å½•ä¸‹æœ‰ä¸€ä¸ªconfig.jsonæ–‡ä»¶ï¼ŒåŠ ä¸Š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"experimental" : "enabled"\n')])])]),t("p",[a._v("é‡å¯docker")]),a._v(" "),t("h3",{attrs:{id:"éªŒè¯æ˜¯å¦å¼€å¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#éªŒè¯æ˜¯å¦å¼€å¯"}},[a._v("#")]),a._v(" éªŒè¯æ˜¯å¦å¼€å¯")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx version\ngithub.com/docker/buildx v0.3.1-tp-docker 6db68d029599c6710a32aa7adcba8e5a344795a7\n")])])]),t("p",[a._v("å¦‚æœåœ¨æŸäº›ç³»ç»Ÿä¸Šè®¾ç½®ç¯å¢ƒå˜é‡ DOCKER_CLI_EXPERIMENTAL ä¸ç”Ÿæ•ˆï¼ˆæ¯”å¦‚ Arch Linuxï¼‰,ä½ å¯ä»¥é€‰æ‹©ä»æºä»£ç ç¼–è¯‘ï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ export DOCKER_BUILDKIT=1\nğŸ³ â†’ docker build --platform=local -o . git://github.com/docker/buildx\nğŸ³ â†’ mkdir -p ~/.docker/cli-plugins && mv buildx ~/.docker/cli-plugins/docker-buildx\n")])])]),t("h2",{attrs:{id:"å¯ç”¨-binfmt-misc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¯ç”¨-binfmt-misc"}},[a._v("#")]),a._v(" å¯ç”¨ binfmt_misc")]),a._v(" "),t("blockquote",[t("p",[a._v("å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Docker æ¡Œé¢ç‰ˆï¼ˆMacOS å’Œ Windowsï¼‰ï¼Œé»˜è®¤å·²ç»å¯ç”¨äº† binfmt_miscï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Linuxï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨ binfmt_miscã€‚å¤§å¤šæ•° Linux å‘è¡Œç‰ˆéƒ½å¾ˆå®¹æ˜“å¯ç”¨ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ä¸ªæ›´å®¹æ˜“çš„åŠæ³•ï¼Œç›´æ¥è¿è¡Œä¸€ä¸ªç‰¹æƒå®¹å™¨ï¼Œå®¹å™¨é‡Œé¢å†™å¥½äº†è®¾ç½®è„šæœ¬ï¼š")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker run --rm --privileged docker/binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d    \n")])])]),t("blockquote",[t("p",[a._v("å»ºè®®å°† Linux å†…æ ¸ç‰ˆæœ¬å‡çº§åˆ° 4.x ä»¥ä¸Šï¼Œç‰¹åˆ«æ˜¯ CentOS ç”¨æˆ·ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°é”™è¯¯ã€‚\néªŒè¯æ˜¯ binfmt_misc å¦å¼€å¯ï¼š")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ ls -al /proc/sys/fs/binfmt_misc/\næ€»ç”¨é‡ 0\næ€»ç”¨é‡ 0\n-rw-r--r-- 1 root root 0 11æœˆ 18 00:12 qemu-aarch64\n-rw-r--r-- 1 root root 0 11æœˆ 18 00:12 qemu-arm\n-rw-r--r-- 1 root root 0 11æœˆ 18 00:12 qemu-ppc64le\n-rw-r--r-- 1 root root 0 11æœˆ 18 00:12 qemu-s390x\n--w------- 1 root root 0 11æœˆ 18 00:09 register\n-rw-r--r-- 1 root root 0 11æœˆ 18 00:12 status\n")])])]),t("p",[a._v("éªŒè¯æ˜¯å¦å¯ç”¨äº†ç›¸åº”çš„å¤„ç†å™¨ï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ cat /proc/sys/fs/binfmt_misc/qemu-aarch64\nenabled\ninterpreter /usr/bin/qemu-aarch64\nflags: OCF\noffset 0\nmagic 7f454c460201010000000000000000000200b7\nmask ffffffffffffff00fffffffffffffffffeffff\n")])])]),t("h2",{attrs:{id:"ä»é»˜è®¤çš„æ„å»ºå™¨åˆ‡æ¢åˆ°å¤šå¹³å°æ„å»ºå™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»é»˜è®¤çš„æ„å»ºå™¨åˆ‡æ¢åˆ°å¤šå¹³å°æ„å»ºå™¨"}},[a._v("#")]),a._v(" ä»é»˜è®¤çš„æ„å»ºå™¨åˆ‡æ¢åˆ°å¤šå¹³å°æ„å»ºå™¨")]),a._v(" "),t("p",[a._v("åˆ›å»ºä¸€ä¸ªæ–°çš„æ„å»ºå™¨ï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx create --use --name mybuilder\n")])])]),t("p",[a._v("å¯åŠ¨æ„å»ºå™¨ï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx inspect mybuilder --bootstrap\n\n[+] Building 5.0s (1/1) FINISHED\n => [internal] booting buildkit                                                                                                                          5.0s\n => => pulling image moby/buildkit:buildx-stable-1                                                                                                       4.4s\n => => creating container buildx_buildkit_mybuilder0                                                                                                     0.6s\nName:   mybuilder\nDriver: docker-container\n\nNodes:\nName:      mybuilder0\nEndpoint:  unix:///var/run/docker.sock\nStatus:    running\nPlatforms: linux/amd64, linux/arm64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6\n")])])]),t("p",[a._v("æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ„å»ºå™¨åŠæ„å»ºå™¨æ”¯æŒçš„ CPU æ¶æ„ï¼Œå¯ä»¥çœ‹åˆ°æ”¯æŒå¾ˆå¤š CPU æ¶æ„ï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx ls\n\nNAME/NODE    DRIVER/ENDPOINT             STATUS  PLATFORMS\nmybuilder *  docker-container\n  mybuilder0 unix:///var/run/docker.sock running linux/amd64, linux/arm64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6\ndefault      docker\n  default    default                     running linux/amd64, linux/386\n")])])]),t("h2",{attrs:{id:"æ„å»ºå¤šå¹³å°é•œåƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºå¤šå¹³å°é•œåƒ"}},[a._v("#")]),a._v(" æ„å»ºå¤šå¹³å°é•œåƒ")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx build -t maodou38/downloader --platform=linux/arm,linux/arm64,linux/amd64 . --push\n")])])]),t("blockquote",[t("p",[a._v("éœ€è¦æå‰é€šè¿‡ docker login å‘½ä»¤ç™»å½•è®¤è¯ Docker Hubã€‚\nå¦‚æœæƒ³å°†æ„å»ºå¥½çš„é•œåƒä¿å­˜åœ¨æœ¬åœ°ï¼Œå¯ä»¥å°† type æŒ‡å®šä¸º dockerï¼Œä½†å¿…é¡»åˆ†åˆ«ä¸ºä¸åŒçš„ CPU æ¶æ„æ„å»ºä¸åŒçš„é•œåƒï¼Œä¸èƒ½åˆå¹¶æˆä¸€ä¸ªé•œåƒï¼Œå³ï¼š")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx build -t maodou38/downloader --platform=linux/arm -o type=docker .\nğŸ³ â†’ docker buildx build -t maodou38/downloader --platform=linux/arm64 -o type=docker .\nğŸ³ â†’ docker buildx build -t maodou38/downloader --platform=linux/amd64 -o type=docker .\n")])])]),t("h2",{attrs:{id:"æµ‹è¯•å¤šå¹³å°é•œåƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•å¤šå¹³å°é•œåƒ"}},[a._v("#")]),a._v(" æµ‹è¯•å¤šå¹³å°é•œåƒ")]),a._v(" "),t("p",[a._v("é¦–å…ˆåˆ—å‡ºæ¯ä¸ªé•œåƒçš„ digestsï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker buildx imagetools inspect maodou38/downloader\n\nName:      docker.io/maodou38/downloader:latest\nMediaType: application/vnd.docker.distribution.manifest.list.v2+json\nDigest:    sha256:ec55f5ece9a12db0c6c367acda8fd1214f50ee502902f97b72f7bff268ebc35a\n\nManifests:\n  Name:      docker.io/maodou38/downloader:latest@sha256:38e083870044cfde7f23a2eec91e307ec645282e76fd0356a29b32122b11c639\n  MediaType: application/vnd.docker.distribution.manifest.v2+json\n  Platform:  linux/arm/v7\n\n  Name:      docker.io/maodou38/downloader:latest@sha256:de273a2a3ce92a5dc1e6f2d796bb85a81fe1a61f82c4caaf08efed9cf05af66d\n  MediaType: application/vnd.docker.distribution.manifest.v2+json\n  Platform:  linux/arm64\n\n  Name:      docker.io/maodou38/downloader:latest@sha256:8b735708d7d30e9cd6eb993449b1047b7229e53fbcebe940217cb36194e9e3a2\n  MediaType: application/vnd.docker.distribution.manifest.v2+json\n  Platform:  linux/amd64\n")])])]),t("p",[a._v("è¿è¡Œæ¯ä¸€ä¸ªé•œåƒå¹¶è§‚å¯Ÿè¾“å‡ºç»“æœï¼š")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ğŸ³ â†’ docker run --rm docker.io/maodou38/downloader:latest@sha256:38e083870044cfde7f23a2eec91e307ec645282e76fd0356a29b32122b11c639\nHello, arm!\n\nğŸ³ â†’ docker run --rm docker.io/maodou38/downloader:latest@sha256:de273a2a3ce92a5dc1e6f2d796bb85a81fe1a61f82c4caaf08efed9cf05af66d\nHello, arm64!\n\nğŸ³ â†’ docker run --rm docker.io/maodou38/downloader:latest@sha256:8b735708d7d30e9cd6eb993449b1047b7229e53fbcebe940217cb36194e9e3a2\nHello, amd64!\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);