(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{360:function(e,t,a){"use strict";a.r(t);var s=a(42),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[e._v("#")]),e._v(" 配置")]),e._v(" "),a("blockquote",[a("p",[e._v("修改/etc/docker/daemon.json (不推荐)")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('  {\n    "hosts": ["unix:///var/run/docker.sock", "tcp://0.0.0.0:2375"]\n    }\n')])])]),a("ul",[a("li",[e._v("如果使用service启动的docker，并不会生效，会报配置错误")])]),e._v(" "),a("blockquote",[a("p",[e._v("修改service配置")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo systemctl edit docker.service\n")])])]),a("p",[e._v("打开一个覆盖docker.service的配置文件")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[Service]\nExecStart=\nExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375\n")])])]),a("p",[e._v("保存，重启systemctl配置")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo systemctl daemon-reload\n")])])]),a("p",[e._v("重启docker")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo systemctl restart docker.service\n")])])]),a("p",[e._v("检查端口是否开启")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ sudo netstat -nltp | grep dockerd\ntcp6       0      0 :::2375                 :::*                    LISTEN\n")])])]),a("h2",{attrs:{id:"防火墙开启对应端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防火墙开启对应端口"}},[e._v("#")]),e._v(" 防火墙开启对应端口")]),e._v(" "),a("ul",[a("li",[e._v("官网\n"),a("img",{attrs:{src:"/docker/docker-remote/docker-remote-1.png",alt:""}})]),e._v(" "),a("li",[e._v("centos自定义Service\n创建/etc/firewalld/services/docker.xml")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<?xml version="1.0" encoding="utf-8"?>\n<service>\n     <short>docker</short>\n      <description>docker daemon for remote access</description>\n      <port protocol="tcp" port="2375"/>\n </service>\n')])])]),a("p",[e._v("查看默认zone(一般是public)")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("firewall-cmd --get-default-zone\n")])])]),a("p",[e._v("在zone中加入这个service")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("firewall-cmd --zone=public --add-service=docker --permanent\n")])])]),a("p",[e._v("重新加载")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("firewall-cmd --reload\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);