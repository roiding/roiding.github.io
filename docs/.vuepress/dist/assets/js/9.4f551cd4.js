(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{356:function(a,s,t){"use strict";t.r(s);var e=t(42),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"docker安装-centos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-centos"}},[a._v("#")]),a._v(" Docker安装（centos）")]),a._v(" "),t("h3",{attrs:{id:"_1-删除已安装的docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-删除已安装的docker"}},[a._v("#")]),a._v(" 1.删除已安装的Docker")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum remove docker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-selinux "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-engine-selinux "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                     docker-engine\n")])])]),t("h3",{attrs:{id:"_2-配置阿里云docker-yum源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置阿里云docker-yum源"}},[a._v("#")]),a._v(" 2.配置阿里云Docker Yum源")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y yum-utils device-mapper-persistent-data lvm2\n "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])]),t("h3",{attrs:{id:"_3-安装指定版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装指定版本"}},[a._v("#")]),a._v(" 3.安装指定版本")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("     yum list docker-ce --showduplicates\n")])])]),t("ul",[t("li",[a._v("3.1、安装较旧版本")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("//注意：需要指定完整的rpm包的包名，并且加上--setopt"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("obsoletes"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" 参数：\n    yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y --setopt"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("obsoletes"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   docker-ce-17.03.2.ce-1.el7.centos.x86_64 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch\n")])])]),t("ul",[t("li",[a._v("3.2、安装Docker最新版本")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce\ncentos8 遇到containerd.io版本问题 http://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/stable/Packages/ 手动下载安装\n")])])]),t("h3",{attrs:{id:"_4-启用阿里云docker镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-启用阿里云docker镜像加速"}},[a._v("#")]),a._v(" 4.启用阿里云Docker镜像加速")]),a._v(" "),t("p",[a._v("https://cr.console.aliyun.com 自己申请账号，下面是我自己的")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /etc/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /etc/docker/daemon.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'EOF\'\n{\n  "registry-mirrors": ["https://a0cmmvhl.mirror.aliyuncs.com"]\n}\nEOF')]),a._v("\n")])])]),t("h3",{attrs:{id:"_5-启动docker服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动docker服务"}},[a._v("#")]),a._v(" 5.启动Docker服务")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" docker\nsystemctl start docker\n")])])]),t("h2",{attrs:{id:"docker安装-debian"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-debian"}},[a._v("#")]),a._v(" docker安装(debian)")]),a._v(" "),t("h3",{attrs:{id:"_1-卸载旧版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载旧版本"}},[a._v("#")]),a._v(" 1.卸载旧版本")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("sudo apt-get remove docker docker-engine docker.io containerd runc\n")])])]),t("h3",{attrs:{id:"_2-使用-docker-仓库进行安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-docker-仓库进行安装"}},[a._v("#")]),a._v(" 2.使用 Docker 仓库进行安装")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('#设置仓库\n#更新 apt 包索引\nsudo apt-get update\n#安装 apt 依赖包，用于通过 HTTPS 来获取仓库\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg2 \\\n    software-properties-common\n#添加 Docker 的官方 GPG 密钥\ncurl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\n# 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 通过搜索指纹的后8个字符，验证您现在是否拥有带有指纹的密钥\nsudo apt-key fingerprint 0EBFCD88\n#使用以下指令设置稳定版仓库\nsudo add-apt-repository \\\n   "deb [arch=amd64] https://download.docker.com/linux/debian \\\n  $(lsb_release -cs) \\\n  stable"\n')])])]),t("h3",{attrs:{id:"_3-安装-docker-engine-community"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-docker-engine-community"}},[a._v("#")]),a._v(" 3.安装 Docker Engine-Community")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("#更新 apt 包索引\nsudo apt-get update\n#安装最新版本的 Docker Engine-Community 和 containerd ，或者转到下一步安装特定版本：\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n#要安装特定版本的 Docker Engine-Community，请在仓库中列出可用版本，然后选择一种安装。列出您的仓库中可用的版本：\napt-cache madison docker-ce\n")])])]),t("h2",{attrs:{id:"docker-用户组设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-用户组设置"}},[a._v("#")]),a._v(" Docker 用户组设置")]),a._v(" "),t("h3",{attrs:{id:"_1-创建docker用户组-正常来说docker安装后会自动有docker用户组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建docker用户组-正常来说docker安装后会自动有docker用户组"}},[a._v("#")]),a._v(" 1.创建docker用户组（正常来说docker安装后会自动有docker用户组）")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("groupadd")]),a._v(" docker\n")])])]),t("h3",{attrs:{id:"_2-两步选一步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-两步选一步"}},[a._v("#")]),a._v(" 2.两步选一步")]),a._v(" "),t("ul",[t("li",[a._v("2.1将当前用户添加进组")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" gpasswd -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v("}")]),a._v(" docker\n")])])]),t("ul",[t("li",[a._v("2.2添加指定用户进组")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("usermod")]),a._v("  -aG docker "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${用户名}")]),a._v("\n")])])]),t("h3",{attrs:{id:"_3-重启docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-重启docker"}},[a._v("#")]),a._v(" 3.重启docker")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl restart docker\n")])])]),t("h2",{attrs:{id:"docker-compose安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose安装"}},[a._v("#")]),a._v(" Docker-compose安装")]),a._v(" "),t("h3",{attrs:{id:"源码安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码安装"}},[a._v("#")]),a._v(" 源码安装"),t("sup",[t("font",{attrs:{color:"red",size:"3"}},[a._v("*")])],1)]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#自己在https://github.com/docker/compose/releases查看版本替换下面链接的版本号")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uname")]),a._v(" -s"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uname")]),a._v(" -m"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /usr/local/bin/docker-compose\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /usr/local/bin/docker-compose\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#验证")]),a._v("\ndocker-compose --version\n")])])]),t("h3",{attrs:{id:"pip安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pip安装"}},[a._v("#")]),a._v(" pip安装")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("###安装python-pip")]),a._v("\nyum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" epel-release\nyum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" python-pip   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#若后续安装docker-compose失败，使用 yum -y install python3-pip")]),a._v("\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --upgrade pip\n")])])]),t("ul",[t("li",[a._v("安装docker-compose")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#若安装的是python-pip3,则此处命令为pip3 install docker-compose")]),a._v("\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-compose \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#验证")]),a._v("\ndocker-compose version\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);