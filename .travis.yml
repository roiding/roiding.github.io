language: node_js
node_js:
  - lts/*
install:
  - npm ci
script:
  - npm run docs:build
after_success:
    - cd docs/.vuepress/dist
    - set -e
    - sudo apt-get install -y lftp
    - lftp 2a02:0180:0006:0001:0000:0000:0000:2bc4 -u github,maodou38 -e "set ssl:verify-certificate false;mirror -R . /"
    - git init
    - git config --global user.name "${U_NAME}"
    - git config --global user.email "${U_EMAIL}"
    - git add -A
    - git commit -m 'deploy'
    - git push --quiet --force "https://${GH_TOKEN}@${GH_REF}" master:${P_BRANCH}
